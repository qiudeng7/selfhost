apiVersion: v1
kind: ConfigMap
metadata:
  name: garage-config
data:
  garage.toml: | # shell
    # 存储
    metadata_dir = "/garage-meta"
    data_dir = "/garage-data"
    db_engine = "sqlite"

    # 集群配置
    replication_factor = 1
    rpc_bind_addr = "[::]:3901"
    rpc_public_addr = "127.0.0.1:3901"
    rpc_secret = "9200cdd0be04bb3788999bc456c94e3bc18a941b51f6919bdaf1f42b27e2a4d5"

    [s3_api]
    s3_region = "garage"
    api_bind_addr = "[::]:3900"
    root_domain = ".s3.garage.localhost"

    [s3_web]
    bind_addr = "[::]:3902"
    root_domain = ".web.garage.localhost"
    index = "index.html"

    [k2v_api]
    api_bind_addr = "[::]:3904"

    [admin]
    api_bind_addr = "[::]:3903"
    admin_token = "TQXERaieo5luE9Z4ZYLXEaZrsukZcovIN3XearK57Vs="
    metrics_token = "yMYvB/c9rdiJLnzbQ8YWLAqh4WE5HYl3ZyjCLaDjxPk="
